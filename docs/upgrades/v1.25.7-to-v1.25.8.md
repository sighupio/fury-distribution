# Kubernetes Fury Distribution v1.25.7 to 1.25.8 Upgrade Guide

This guide describes the steps to follow to upgrade the Kubernetes Fury Distribution (KFD) from v1.25.7 to 1.25.8.

If you are running a custom set of modules, or different versions than the ones included with each release of KFD, please refer to each module's release notes.

Notice that the guide will not cover changes related to the cloud provider, ingresses or pod placement changes. Only changes related to KFD and its modules.

> â›”ï¸ **IMPORTANT**
> we strongly recommend reading the whole guide before starting the upgrade process to identify possible blockers.

## Upgrade procedure

### 1. Using furyctl

Change `.spec.distributionVersion` on your `furyctl.yaml` file with the new `v1.25.8`.

Validate the schema using the new `v0.26.2` `furyctl` version:

#### With EKSCluster provider

```bash
furyctl validate config
```

Delete the old ebs csi driver addon deployment and daemonset controllers with:

```bash
kubectl delete deployment ebs-csi-controller -n kube-system
kubectl delete daemonset ebs-csi-node -n kube-system
```

Apply the new configuration on the cluster:

```bash
furyctl create cluster
```

And in the last step, you need to manually rollout nodes on the ASGs.

#### With KFDDistribution provider

Just execute:

```bash
furyctl validate config
```

Apply the new configuration on the cluster with:

```bash
furyctl create cluster
```

### 2. Using KFD directly

As a high-level overview, the upgrade procedure consists on:

1. Upgrading KFD (all the core modules).
2. Upgrading the Kubernetes cluster itself.

The suggested approach to upgrade the distribution is to do it one module at a time, to reduce the risk of errors and to make the process more manageable.
#### Auth module upgrade

To upgrade the Auth module to the new version, update the version on the `Furyfile.yml` file to the new version:

If you were using these components, adjust your Kustomize project to use the new `auth` module as a base:

```yaml
versions:
...
  auth: v0.0.4
...
```

Then, download the new modules with `furyctl` with the following command:

```bash
furyctl legacy vendor -H
```

Apply your Kustomize project that uses Auth module packages as bases with:

```bash
kustomize build <your-project-path/auth> | kubectl apply -f - --server-side
```

ðŸŽ‰ **CONGRATULATIONS** you have now successfully updated all the core modules to KFD 1.25.8
