# Kubernetes Fury Distribution Release v1.22.0

Welcome to the KFD release `v1.22.0`. From this release on, Fury follows a
different versioning schema. KFD version now will closely follow the version of
the latest `Kubernetes` release that is supported by Fury. This release supports `kubernetes` runtime `v1.22.0`.

This distribution is maintained with â¤ï¸ by the team [SIGHUP](https://sighup.io/),
and is battle tested in production environments.

This new release of KFD features a bundle of all the core modules supported by
Fury with enhancements and bug fixes.

## New Features

### Core Module Updates

- Kubernetes `1.22` compatibility on all modules
- [networking](https://github.com/sighupio/fury-kubernetes-networking) ğŸ“¦ core module: [**v1.9.0**](https://github.com/sighupio/fury-kubernetes-networking/releases/tag/v1.9.0)
  No update.
- [monitoring](https://github.com/sighupio/fury-kubernetes-monitoring) ğŸ“¦ core module: [**v1.14.2**](https://github.com/sighupio/fury-kubernetes-monitoring/releases/tag/v1.14.2)
  No update.
- [logging](https://github.com/sighupio/fury-kubernetes-logging) ğŸ“¦ core module: [**v1.10.3**](https://github.com/sighupio/fury-kubernetes-logging/releases/tag/v1.10.3)
  No update.
- [ingress](https://github.com/sighupio/fury-kubernetes-ingress) ğŸ“¦ core module: [**v1.12.2**](https://github.com/sighupio/fury-kubernetes-ingress/releases/tag/v1.12.2)
  No update.
- [dr](https://github.com/sighupio/fury-kubernetes-dr) ğŸ“¦ core module: [**v1.9.0**](https://github.com/sighupio/fury-kubernetes-dr/releases/tag/v1.9.0)
  No update.
- [OPA](https://github.com/sighupio/fury-kubernetes-opa) ğŸ“¦ core module: [**v1.6.0**](https://github.com/sighupio/fury-kubernetes-opa/releases/tag/v1.6.0)
  No update.

> Please refer the individual release notes for detailed information

## Upgrade path

### Katalog Procedure

To upgrade this distribution from `v1.21.x` to `v1.22.0`, you need to download this new version, vendor the dependencies,
finally applying the `kustomize` project.

```bash
furyctl vendor -H
kustomize build . | kubectl apply -f -
```

> **NOTE**: *The upgrade takes some minutes (depends on the cluster size), and you should expect some downtime during
the upgrade process.*

### Terraform Procedure

## Test it

If you want to test the distribution in a test environment, spin up a
[`kind`](https://github.com/kubernetes-sigs/kind/releases/tag/v0.11.0) cluster, then deploy all rendered manifests.

```bash
$ kind version
kind v0.11.0 go1.16.4 darwin/amd64
$ curl -Ls https://github.com/sighupio/fury-distribution/releases/download/v1.22.0/katalog/tests/config/kind-config | kind create cluster --image registry.sighup.io/fury/kindest/node:v1.22.0 --config -
Creating cluster "kind" ...
 âœ“ Ensuring node image (kindest/node:v1.22.0) ğŸ–¼
 âœ“ Preparing nodes ğŸ“¦ ğŸ“¦
 âœ“ Writing configuration ğŸ“œ
 âœ“ Starting control-plane ğŸ•¹ï¸
 âœ“ Installing StorageClass ğŸ’¾
 âœ“ Joining worker nodes ğŸšœ
Set kubectl context to "kind-kind"
You can now use your cluster with:

kubectl cluster-info --context kind-kind

Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community ğŸ™‚
$ kubectl apply -f https://github.com/sighupio/fury-distribution/releases/download/v1.22.0/fury-distribution-v1.22.0.yml
namespace/cert-manager created
namespace/gatekeeper-system created
namespace/ingress-nginx created
namespace/logging created
namespace/monitoring created
customresourcedefinition.apiextensions.k8s.io/alertmanagers.monitoring.coreos.com created
customresourcedefinition.apiextensions.k8s.io/bgpconfigurations.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/bgppeers.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/blockaffinities.crd.projectcalico.org created
customresourcedefinition.apiextensions.k8s.io/certificaterequests.cert-manager.io created
customresourcedefinition.apiextensions.k8s.io/certificates.cert-manager.io created
customresourcedefinition.apiextensions.k8s.io/challenges.acme.cert-manager.io created
customresourcedefinition.apiextensions.k8s.io/clusterinformations.crd.projectcalico.org created
<TRUNCATED OUTPUT>
```

> **NOTE**: *Run `kubectl apply` multiple times until you see no errors in the console*
