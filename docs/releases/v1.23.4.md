# Kubernetes Fury Distribution Release v1.23.4

Welcome to KFD release `v1.23.4`.

The distribution is maintained with â¤ï¸ by the team [SIGHUP](https://sighup.io/), and is battle tested in production environments.

This release updates all the modules to the latest version and maintains compatibility with Kubernetes 1.23.

## New Features since `v1.23.3`

### Core Module Updates

- [networking](https://github.com/sighupio/fury-kubernetes-networking) ðŸ“¦ core module: v1.10.0 -> [**v1.12.1**](https://github.com/sighupio/fury-kubernetes-networking/releases/tag/v1.12.1)
  - Updated calico from `3.24.1` to `3.25.0`.
  - Updated tigera operator from `1.28.1` to `1.29.0`.
- [monitoring](https://github.com/sighupio/fury-kubernetes-monitoring) ðŸ“¦ core module: v2.0.1
  - No updates
- [logging](https://github.com/sighupio/fury-kubernetes-logging) ðŸ“¦ core module: v3.0.1 -> [**v3.1.3**](https://github.com/sighupio/fury-kubernetes-logging/releases/tag/v3.1.3)
  - Replaced technical preview loki-single package with production grade loki-dstributed package. loki version `2.7.3`.
  - Updated opensearch from `2.0.0` to `2.5.0`.
  - Updated opensearch-dashboards from `2.0.0` to `2.5.0`.
  - Updated logging-operator from `3.17.7` to `3.17.10`.
  - Introduced new minio-ha package, version `vRELEASE.2023-01-12T02-06-16Z`.
- [ingress](https://github.com/sighupio/fury-kubernetes-ingress) ðŸ“¦ core module: v1.13.1 -> [**v1.14.1**](https://github.com/sighupio/fury-kubernetes-ingress/releases/tag/v1.14.0)
  - Updated cert-manager from `1.10.0` to `1.11.0`.
  - Updated external-dns from `0.10.2` to `0.13.2`.
  - Updated forecastle from `1.0.103` to `1.0.119`.
  - Updated nginx from `1.3.1` to `1.5.1`.
- [dr](https://github.com/sighupio/fury-kubernetes-dr) ðŸ“¦ core module: v1.10.1 -> [**v1.11.0**](https://github.com/sighupio/fury-kubernetes-dr/releases/tag/v1.11.0)
  - Updated velero from `1.9.2` to `1.10.1`.
  - Updated all plugins from `1.5.1` to `1.6.1`.
- [OPA](https://github.com/sighupio/fury-kubernetes-opa) ðŸ“¦ core module: v1.7.3 -> [**v1.8.0**](https://github.com/sighupio/fury-kubernetes-opa/releases/tag/v1.8.0)
  - Updated gatekeeper from `3.9.2` to `3.11.0`.
  - Updated gatekeeper-policy-manager from `1.0.2` to `1.0.3`.
- [auth](https://github.com/sighupio/fury-kubernetes-auth) ðŸ“¦ core module: v0.0.2 -> [**v0.0.3**](https://github.com/sighupio/fury-kubernetes-auth/releases/tag/v0.0.3)
  - Updated pomerium from `0.15.8` to `0.21.0`.
  
> Please refer the individual release notes for detailed information.

## Upgrade procedure

Check the [v1.23.3-to-v1.23.4 upgrade guide](../upgrades/v1.23.3-to-v1.23.4.md) for the detailed procedure.

## Breaking changes

Follow a summary of all the breaking changes introduced in this release, check each module for detailed information.

- Logging:
  - Removed minio StatefulSet from logging-operated package, replaced with minio-ha package.
  - Added a new infra ClusterFlow that select logs from infrastructural namespaces. kubernetes ClusterFlow will now exclude
    infrastructural namespaces from the log selection.
- Auth:
  - Pomerium has deprecated the policy field in the configuration in favour of routes. You'll need to adapt your policy file to the new format.
  - Value of grpc_address in Pomerium's configuration must be different form address. See the [example policy](https://github.com/sighupio/fury-kubernetes-auth/blob/v0.0.3/katalog/pomerium/config/policy.example.yaml).
  - Forward mode has been deprecated in Pomerium 0.21.

## New features ðŸŒŸ

This release adds new features across some core modules. Following is a list of the most interesting ones for each module.

- We've improved the out-of-the-box monitoring capabilities of all core modules, adding new metrics, dashboards and alerts for key components of the distribution.

- Logging
  - Introduced a new `loki-distributed` package, now considered stable.
  - Added a new package `minio-ha` used to store error logs from fluentd, and as a backend storage for `loki-disributed` package.
  - Added a new index for infrastructural (KFD's) components and left the `kubernetes` index for applications specific logs.
